<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Results</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/report.css') }}">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
<header>
  <div class="container">
    <h1>Your Test Results</h1>
  </div>
</header>

<section class="results">
  <div class="container">
    <h2>Results Summary</h2>
    <div class="summary-and-quotes">
      <table>
        <tr>
          <th>Score Type</th>
          <th>Score</th>
          <th>Interpretation</th>
        </tr>
        <tr>
          <td>Depression</td>
          <td>{{ report['Depression Score'] }}</td>
          <td>{{ report['Depression Interpretation'] }}</td>
        </tr>
        <tr>
          <td>Anxiety</td>
          <td>{{ report['Anxiety Score'] }}</td>
          <td>{{ report['Anxiety Interpretation'] }}</td>
        </tr>
        <tr>
          <td>Stress</td>
          <td>{{ report['Stress Score'] }}</td>
          <td>{{ report['Stress Interpretation'] }}</td>
        </tr>
      </table>

      <div class="cards">
        {% for quote in quotes %}
        <div class="card {{ loop.index % 3 == 1 and 'red' or (loop.index % 3 == 2 and 'blue' or 'green') }}">
          <p class="tip">{{ quote }}</p>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
</section>


<section class="charts">
  <div class="container">
    <h2>Visual Representation</h2>
    <div class="chart-container" style="width: 60%; margin: auto;">
      <canvas id="pieChart"></canvas>
    </div>
    <div class="chart-container" style="width: 80%; margin: auto;">
      <canvas id="barGraph"></canvas>
    </div>
  </div>
</section>

<section class="recommendation-link">
  <div class="container">
    <button onclick="window.location.href='{{ url_for('recommendation') }}'">View Recommended Psychiatrists</button>
  </div>
</section>

<script>
  // Pass the score data from the server to the JavaScript file
  var depressionScore = {{ report['Depression Score'] }};
  var anxietyScore = {{ report['Anxiety Score'] }};
  var stressScore = {{ report['Stress Score'] }};
</script>
<script src="{{ url_for('static', filename='js/charts.js') }}"></script>
</body>

</html>
