<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Results</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
<header>
  <div class="container">
    <h1>Your Test Results</h1>
  </div>
</header>

<section class="results">
  <div class="container">
    <h2>Results Summary</h2>
    <table>
      <tr>
        <th>Score Type</th>
        <th>Score</th>
        <th>Interpretation</th>
      </tr>
      <tr>
        <td>Depression</td>
        <td>{{ report['Depression Score'] }}</td>
        <td>{{ report['Depression Interpretation'] }}</td>
      </tr>
      <tr>
        <td>Anxiety</td>
        <td>{{ report['Anxiety Score'] }}</td>
        <td>{{ report['Anxiety Interpretation'] }}</td>
      </tr>
      <tr>
        <td>Stress</td>
        <td>{{ report['Stress Score'] }}</td>
        <td>{{ report['Stress Interpretation'] }}</td>
      </tr>
    </table>
  </div>
</section>

<section class="charts">
  <div class="container">
    <h2>Visual Representation</h2>
    <div class="chart-container" style="width: 60%; margin: auto;">
      <canvas id="pieChart"></canvas>
    </div>
    <div class="chart-container" style="width: 80%; margin: auto;">
      <canvas id="barGraph"></canvas>
    </div>
  </div>
</section>

<section class="recommendation-link">
  <div class="container">
    <button onclick="window.location.href='{{ url_for('recommendation') }}'">View Recommended Psychiatrists</button>
  </div>
</section>

<script>
  // Pie chart
  var pieCtx = document.getElementById('pieChart').getContext('2d');
  var pieChart = new Chart(pieCtx, {
    type: 'pie',
    data: {
      labels: ['Depression', 'Anxiety', 'Stress'],
      datasets: [{
        data: [{{ report['Depression Score'] }}, {{ report['Anxiety Score'] }}, {{ report['Stress Score'] }}],
  backgroundColor: ['#ff6384', '#36a2eb', '#ffcd56'],
          hoverOffset: 4
  }]
  },
  options: {
    responsive: true,
            maintainAspectRatio: false,
            plugins: {
      legend: {
        position: 'bottom',
      },
    }
  }
  });

  // Bar graph
  var barCtx = document.getElementById('barGraph').getContext('2d');
  var barGraph = new Chart(barCtx, {
    type: 'bar',
    data: {
      labels: ['Depression', 'Anxiety', 'Stress'],
      datasets: [{
        label: 'Score',
        data: [{{ report['Depression Score'] }}, {{ report['Anxiety Score'] }}, {{ report['Stress Score'] }}],
  backgroundColor: ['#ff6384', '#36a2eb', '#ffcd56'],
          borderWidth: 1
  }]
  },
  options: {
    responsive: true,
            maintainAspectRatio: false,
            scales: {
      y: {
        beginAtZero: true
      }
    },
    plugins: {
      legend: {
        display: false,
      },
    }
  }
  });
</script>
</body>

</html>
